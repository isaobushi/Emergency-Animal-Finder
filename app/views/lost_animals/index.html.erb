<h2 class="page-title">Lost Animals</h2>
<form action="" class="search-form">
  <input type="text" class="search-input">
  <button>Search</button>
</form>

<div id="mapContainer"></div>

<% @lost_animals.each do |animal| %>
  <a href="<%= lost_animal_path(animal) %>">
    <div class="animal-item">
      <h5 class="tags"><%= animal.tags.join(' ') %></h5>
      <img src="<%= animal.image %>" alt="Lost <%= animal.species %>">
      <h3><%= animal.species %></h3>
      <h4>Lost at: <%= animal.location_lost %></h4>
      <h4>Date lost: <%= animal.date_lost %></h4>
      <span class="lost_lat"><%= animal.lat %></span>
      <span class="lost_long"><%= animal.long %></span>
    </div>
  </a>
<% end %>

<script>
let searchInput = document.querySelector('.search-input')
let searchForm = document.querySelector('.search-form')
let results = document.querySelectorAll('.animal-item')

function search(event) {
  event.preventDefault()
  results.forEach(animal => {
    if (event.target.value === "") {
      animal.style.display = "none"
    } else if (animal.firstElementChild.textContent.includes(event.target.value)) {
      animal.style.display = "block"
    } else (
      animal.style.display = "none"
    )
  })
}
searchForm.addEventListener('submit', search)
searchInput.addEventListener('keyup', search)
	
</script>
